# packaaaa

This code repository is the code for the Packer portion of the CYSE 492 Senior Design Project (Lockheed Martin Packer/Loader)

The follow dependencies are required to build:
```
flask 
pynacl 
pyopenssl 
requests
pysimplegui
config-with-yaml
numpy
```

To run
```
python Packer.py
```

Usage

1. Within the same directory as Packer.py, create a folder called `static`
2. Within this `static` folder, create a folder for a loader (name of folder should be ID of loader), and have a .txt file with the name of the loader (authorize the loader by placing its ID in authorized-ids.txt). 
3. Within this loader folder, any folders placed within will serve as payload folders. 2 files, details.txt and `secret-key` should be present. A secret key file can be generated by running ./Packer.py -g
4. In each payload folder, place any executables/files that should be sent to the loader. The order in which they are sent is determined by an alphabetical sort, so name your files appropriately. Accompanying each executable/file can be 2 additional files for argv and envp arguments. For example, if you have "a.exe", you may create "a.argv" and "a.envp".
5. Additionally, a similar file "a.flags" may be provided to issue additional instructions to the Loader regarding the particular executable/file
6. A reserved payload named instructions will be in each loader's id folder, within this, a file contains the names of each payload you want to send to the loader the next time it checks in

Logs are kept in the current dir under /logs/ and the columns are organized in the following manner
datetime | log level | loaderID | payloadRequested | UID 

Current Functionality:

* Able to send files to a requesting program
* Able to be run in adhoc https mode
* Able to compress files
* Able to encrypt compressed file
* Able to combine multiple encrypted, compressed files into a blob
* Blob metadata is written in the filename
* Contains a tester to test the blob decompression and decryption
* SSL Ready
* Generate secret keys
* Send "encrypted" argv and envp to payloads

todo:
Authenticate usage of api

To create final executable: https://pyinstaller.readthedocs.io/en/stable/usage.html
